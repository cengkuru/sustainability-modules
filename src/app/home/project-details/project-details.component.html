<div class="mx-auto max-w-3xl px-4 sm:px-6 lg:max-w-7xl lg:px-8 py-8">
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
        <div *ngIf="project$ | async as project; else loading" class="p-6">
            <h2 class="text-2xl font-bold text-secondary mb-6">{{ project.name }}</h2>
            <div class="flex flex-col lg:flex-row">
                <!-- Vertical Tabs -->
                <div class="w-full lg:w-1/4 border-b lg:border-b-0 lg:border-r border-gray-200">
                    <nav class="flex flex-col space-y-1">
                        <button *ngFor="let tab of tabs"
                                class="tab-button py-4 px-4 text-left text-sm font-medium flex items-center space-x-2"
                                [class.bg-accent]="activeTab === tab.id"
                                [class.text-white]="activeTab === tab.id"
                                [class.text-secondary]="activeTab !== tab.id"
                                (click)="setActiveTab(tab.id)">
                            <i class="bi" [ngClass]="tab.icon"></i>
                            <span>{{ tab.label }}</span>
                        </button>
                    </nav>
                </div>
                <!-- Tab Content -->
                <div class="w-full lg:w-3/4 p-4">
                    <ng-container *ngIf="activeTab === 'identification'">
                        <div class="mb-8">
                            <h2 class="text-xl font-bold text-secondary">Identification</h2>
                            <div class="flex flex-col lg:flex-row">
                                <!-- Vertical Sub-tabs -->
                                <div class="w-full lg:w-1/4 border-b lg:border-b-0 lg:border-r border-gray-200">
                                    <ul class="space-y-4 p-4">
                                        <li *ngFor="let subTab of identificationTabs">
                                            <button (click)="setIdentificationActiveTab(subTab.id)"
                                                    class="w-full text-left py-2 px-4 rounded-lg focus:outline-none"
                                                    [ngClass]="{'bg-gray-100': identificationActiveTab === subTab.id}">{{ subTab.label }}</button>
                                        </li>
                                    </ul>
                                </div>
                                <!-- Sub-tab Content -->
                                <div class="w-full lg:w-3/4 p-4 space-y-8">
                                    <div *ngIf="identificationActiveTab === 'basicData'" class="space-y-4">
                                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                            <h3 class="text-xl font-semibold text-secondary mb-4">Basic Data</h3>
                                            <div class="text-gray-700 space-y-2">
                                                <p>Project reference number: {{ project.stages.identification.basicData.projectReferenceNumber }}</p>
                                                <p>Project owner: {{ project.stages.identification.basicData.projectOwner }}</p>
                                                <p>Sector, sub-sector: {{ project.stages.identification.basicData.sectorSubsector }}</p>
                                                <p>Project name: {{ project.stages.identification.basicData.projectName }}</p>
                                                <p>Project location: {{ project.stages.identification.basicData.projectLocation }}</p>
                                                <p>Purpose: {{ project.stages.identification.basicData.purpose }}</p>
                                                <p>Project description: {{ project.stages.identification.basicData.projectDescription }}</p>
                                                <div>
                                                    <p class="font-semibold">Project officials and roles:</p>
                                                    <ul class="list-disc list-inside">
                                                        <li *ngFor="let official of project.stages.identification.basicData.projectOfficialsAndRoles" class="text-secondary">
                                                            {{ official.role }}: {{ official.name }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="identificationActiveTab === 'climateFinanceData'" class="space-y-4">
                                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                            <h3 class="text-xl font-semibold text-secondary mb-4">Climate Finance Data</h3>
                                            <div class="text-gray-700 space-y-2">
                                                <p>Climate objective: {{ project.stages.identification.climateFinanceData.climateObjective }}</p>
                                                <p>Financial instrument: {{ project.stages.identification.climateFinanceData.financialInstrument }}</p>
                                                <p>Climate transformation: {{ project.stages.identification.climateFinanceData.climateTransformation }}</p>
                                                <p>Climate finance decision-making: {{ project.stages.identification.climateFinanceData.climateFinanceDecisionMaking }}</p>
                                                <p>Nationally determined contributions: {{ project.stages.identification.climateFinanceData.nationallyDeterminedContributions }}</p>
                                                <p>Paris agreement: {{ project.stages.identification.climateFinanceData.parisAgreement }}</p>
                                                <p>Amount of investment: {{ project.stages.identification.climateFinanceData.amountOfInvestment }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="identificationActiveTab === 'institutionalSustainabilityData'" class="space-y-4">
                                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                            <h3 class="text-xl font-semibold text-secondary mb-4">Institutional Sustainability Data</h3>
                                            <div class="text-gray-700 space-y-2">
                                                <p>Policy coherence documentation: {{ project.stages.identification.institutionalSustainabilityData.policyCoherenceDocumentation }}</p>
                                                <p>Number of Freedom of Information requests: {{ project.stages.identification.institutionalSustainabilityData.numberOfFreedomOfInformationRequests }}</p>
                                                <p>Lobbying meetings minutes: {{ project.stages.identification.institutionalSustainabilityData.lobbyingMeetingsMinutes }}</p>
                                                <p>Number of lobbying activities: {{ project.stages.identification.institutionalSustainabilityData.numberOfLobbyingActivities }}</p>
                                                <p>Number of Freedom of Information answers: {{ project.stages.identification.institutionalSustainabilityData.numberOfFreedomOfInformationAnswers }}</p>
                                                <p>Freedom of Information requests and answers: {{ project.stages.identification.institutionalSustainabilityData.freedomOfInformationRequestsAndAnswers }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="identificationActiveTab === 'attachments'" class="space-y-4">
                                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                            <h3 class="text-xl font-semibold text-secondary mb-4">Supporting Documents</h3>
                                            <ul class="list-disc list-inside space-y-2">
                                                <li *ngFor="let attachment of project.stages.identification.attachments" class="text-secondary">
                                                    <a [href]="attachment.link" class="text-accent hover:underline">{{ attachment.title }}</a> - {{ attachment.description }}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <!-- Placeholder for the rest of the tabs -->
                    <div *ngIf="activeTab === 'preparation'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Preparation</h2>
                        <!-- Content for Preparation Tab -->
                    </div>
                    <div *ngIf="activeTab === 'tender-management'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Tender Management</h2>
                        <!-- Content for Tender Management Tab -->
                    </div>
                    <div *ngIf="activeTab === 'implementation'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Implementation</h2>
                        <!-- Content for Implementation Tab -->
                    </div>
                    <div *ngIf="activeTab === 'completion'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Completion</h2>
                        <!-- Content for Completion Tab -->
                    </div>
                    <div *ngIf="activeTab === 'operation-and-maintenance'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Operation and Maintenance</h2>
                        <!-- Content for Operation and Maintenance Tab -->
                    </div>
                    <div *ngIf="activeTab === 'decommissioning'" class="tab-content space-y-12">
                        <h2 class="text-xl font-bold text-secondary">Decommissioning</h2>
                        <!-- Content for Decommissioning Tab -->
                    </div>
                </div>
            </div>
        </div>
        <ng-template #loading>
            <div class="flex justify-center items-center h-64">
                <div class="spinner-border text-accent" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </ng-template>
    </div>
</div>
